# This will be prefixed to all the keys below.
namespace: sesar
validators:
  age_max:
    key_metadata:
      description: Maximum geological age in years
      display_name: Age (max)
      example: 4.6
    static_mappings:
      SESAR: Age (max)
      units: age_unit
    validators:
    - callable_builder: units
      module: SampleService.core.validator.builtin
      parameters:
        key: units
        units: years
    - callable_builder: number
      module: SampleService.core.validator.builtin
      parameters:
        gte: 0
        keys: value

  age_min:
    key_metadata:
      description: minimum geological age in years
      display_name: Age (min)
      example: 4.2
    static_mappings:
      SESAR: Age (min)
      units: age_unit
    validators:
    - callable_builder: units
      module: SampleService.core.validator.builtin
      parameters:
        key: units
        units: years
    - callable_builder: number
      module: SampleService.core.validator.builtin
      parameters:
        gte: 0
        keys: value

  depth_in_core_max:
    key_metadata:
      description: maximum depth in core in meters
      display_name: Depth in Core (max)
      example: 0.003
    static_mappings:
      SESAR:  Depth in Core (max)
      units: depth_scale
    validators:
    - callable_builder: units
      module: SampleService.core.validator.builtin
      parameters:
        key: units
        units: meters
    - callable_builder: number
      module: SampleService.core.validator.builtin
      parameters:
        keys: value
        required: true

  depth_in_core_min:
    key_metadata:
      description: Minimum depth in core in meters
      display_name: Depth in Core (min)
      example: 0.001
    static_mappings:
      SESAR: Depth in Core (min)
      units: depth_scale
    validators:
    - callable_builder: units
      module: SampleService.core.validator.builtin
      parameters:
        key: units
        units: meters
    - callable_builder: number
      module: SampleService.core.validator.builtin
      parameters:
        keys: value
        required: true

  easting:
    key_metadata:
      description: Easting in meters
      display_name: Easting
      example: 305294
    static_mappings:
      SESAR: Easting
    validators:
    - callable_builder: number
      module: SampleService.core.validator.builtin
      parameters:
        keys: value
    - callable_builder: units
      module: SampleService.core.validator.builtin
      parameters:
        key: units
        units: m

  elevation_end:
    key_metadata:
      description: Elevation end in meters
      display_name: Elevation end
      example: 673.5; -4520
    static_mappings:
      SESAR: Elevation end
      units: elevation_unit
    validators:
    - callable_builder: units
      module: SampleService.core.validator.builtin
      parameters:
        key: units
        units: meters
    - callable_builder: number
      module: SampleService.core.validator.builtin
      parameters:
        keys: value
        required: true

  elevation_start:
    key_metadata:
      description: Elevation start in meters
      display_name: Elevation start
      example: 678.5; -4536
    static_mappings:
      SESAR: Elevation start
      units: elevation_unit
    validators:
    - callable_builder: units
      module: SampleService.core.validator.builtin
      parameters:
        key: units
        units: meters
    - callable_builder: number
      module: SampleService.core.validator.builtin
      parameters:
        keys: value
        required: true

  # NOTE: Conflicts with what is in the template
  # geological_age:
  #   key_metadata:
  #     description: Geological Age in years * 1000000
  #     display_name: Geological Age
  #     example: 
  #   static_mappings:
  #      Geological Age
  #     units: geological_unit
  #   validators:
  #   - callable_builder: units
  #     module: SampleService.core.validator.builtin
  #     parameters:
  #       key: units
  #       units: year * 1000000
  #   - callable_builder: number
  #     module: SampleService.core.validator.builtin
  #     parameters:
  #       gte: 0
  #       keys: value

  northing:
    key_metadata:
      description: Northing in meters
      display_name: Northing
      example: 4111279
    static_mappings:
      SESAR: Northing
    validators:
    - callable_builder: number
      module: SampleService.core.validator.builtin
      parameters:
        keys: value
    - callable_builder: units
      module: SampleService.core.validator.builtin
      parameters:
        key: units
        units: m

  material:
    key_metadata:
      description: Material that the sample consists of using SESAR vocabulary.
      display_name: Material (SESAR)
      example: Rock; Liquid>Aqueous
    static_mappings:
      SESAR: Material
    validators:
    - callable_builder: enum
      module: SampleService.core.validator.builtin
      parameters:
        allowed-values:
        - Biology
        - Gas
        - Ice
        - Liquid>aqueous
        - Liquid>organic
        - Mineral
        - NotApplicable
        - Other
        - Particulate
        - Rock
        - Sediment
        - Soil
        - Synthetic

  #TODO: Add controlled list
  #https://www.geosamples.org/help/vocabularies/subobject
  sub-object_type:
    key_metadata:
      description: More descriptive Object Type. This applies only to samples with Object Type set to Individual Sample.
      display_name: Sub-object type
      example: Thin section; Powder
    static_mappings:
      SESAR: Sub-object type
    validators:
    - callable_builder: noop
      module: SampleService.core.validator.builtin

